(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03779834"],{"05cc":function(e,t,n){},"1f28":function(e,t,n){"use strict";n("e23c")},"26d9":function(e,t,n){"use strict";n("9bc8")},"707c":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a={class:"project-home"},r={class:"main"},o={class:"main-view"};function i(e,t,n,i,l,u){var s=Object(c["I"])("Menu"),d=Object(c["I"])("Main"),f=Object(c["I"])("router-view");return Object(c["B"])(),Object(c["j"])("div",a,[Object(c["m"])(s,{interfaceList:l.interfaceList},null,8,["interfaceList"]),Object(c["m"])("div",r,[Object(c["S"])(Object(c["m"])(d,{interfaceList:l.interfaceList},null,8,["interfaceList"]),[[c["O"],u.showMain]]),Object(c["m"])("div",o,[Object(c["m"])(f)])])])}n("b0c0");var l=Object(c["U"])("data-v-634c8910");Object(c["E"])("data-v-634c8910");var u={class:"menu-box"},s={class:"has-options-btn"},d=Object(c["m"])("span",null,"全部接口",-1),f=Object(c["l"])("添加接口"),b={key:0,class:"none"},j={class:"has-options-btn"},O={class:"del-btn"},m=Object(c["l"])("删除此接口");Object(c["C"])();var p=l((function(e,t,n,a,r,o){var i=Object(c["I"])("PlusSquareOutlined"),p=Object(c["I"])("a-tooltip"),h=Object(c["I"])("a-menu-item"),I=Object(c["I"])("MinusSquareOutlined"),v=Object(c["I"])("a-menu"),C=Object(c["I"])("CreateInterfaceModal");return Object(c["B"])(),Object(c["j"])("div",u,[Object(c["m"])(v,{mode:"inline",selectedKeys:r.selectedKeys,"onUpdate:selectedKeys":t[1]||(t[1]=function(e){return r.selectedKeys=e}),onSelect:o.selectMenu},{default:l((function(){return[Object(c["m"])(h,{key:"all",class:"all"},{default:l((function(){return[Object(c["m"])("div",s,[d,Object(c["m"])("span",null,[Object(c["m"])(p,null,{title:l((function(){return[f]})),default:l((function(){return[Object(c["m"])(i,{onClick:o.addInterface},null,8,["onClick"])]})),_:1})])])]})),_:1}),n.interfaceList.length<1?(Object(c["B"])(),Object(c["j"])("div",b,"无数据")):Object(c["k"])("",!0),(Object(c["B"])(!0),Object(c["j"])(c["b"],null,Object(c["H"])(n.interfaceList,(function(e){return Object(c["B"])(),Object(c["j"])(h,{key:e._id},{default:l((function(){return[Object(c["m"])("div",j,[Object(c["m"])("span",null,Object(c["K"])(e.name),1),Object(c["m"])("span",O,[Object(c["m"])(p,null,{title:l((function(){return[m]})),default:l((function(){return[Object(c["m"])(I,{onClick:Object(c["T"])((function(t){return o.delInterface(e._id)}),["stop"])},null,8,["onClick"])]})),_:2},1024)])])]})),_:2},1024)})),128))]})),_:1},8,["selectedKeys","onSelect"]),r.showCreateInterfaceModal?(Object(c["B"])(),Object(c["j"])(C,{key:0,showCreateModal:r.showCreateInterfaceModal,"onUpdate:showCreateModal":t[2]||(t[2]=function(e){return r.showCreateInterfaceModal=e})},null,8,["showCreateModal"])):Object(c["k"])("",!0)])})),h=(n("99af"),n("ff4a")),I=n("0f1b"),v=Object(c["l"])("取消"),C=Object(c["l"])("确定"),w=Object(c["l"])("get"),M=Object(c["l"])("post"),_=Object(c["m"])("p",null,"后续可进入详情页进行编辑",-1);function k(e,t,n,a,r,o){var i=Object(c["I"])("a-button"),l=Object(c["I"])("a-input"),u=Object(c["I"])("a-form-item"),s=Object(c["I"])("a-select-option"),d=Object(c["I"])("a-select"),f=Object(c["I"])("a-form"),b=Object(c["I"])("a-modal");return Object(c["B"])(),Object(c["j"])(b,{visible:n.showCreateModal,title:"添加接口",onCancel:o.closeCreateModal},{footer:Object(c["R"])((function(){return[Object(c["m"])(i,{key:"back",onClick:o.closeCreateModal},{default:Object(c["R"])((function(){return[v]})),_:1},8,["onClick"]),Object(c["m"])(i,{key:"submit",type:"primary",loading:r.loading,onClick:o.createInterface},{default:Object(c["R"])((function(){return[C]})),_:1},8,["loading","onClick"])]})),default:Object(c["R"])((function(){return[Object(c["m"])(f,{ref:"newInterfaceForm",model:r.newInterfaceForm,labelCol:{span:6},wrapperCol:{span:18}},{default:Object(c["R"])((function(){return[Object(c["m"])(u,{label:"接口名称",required:"",name:"name"},{default:Object(c["R"])((function(){return[Object(c["m"])(l,{value:r.newInterfaceForm.name,"onUpdate:value":t[1]||(t[1]=function(e){return r.newInterfaceForm.name=e}),placeholder:"项目名称"},null,8,["value"])]})),_:1}),Object(c["m"])(u,{label:"接口路径",required:"",name:"path"},{default:Object(c["R"])((function(){return[Object(c["m"])(l,{value:r.newInterfaceForm.path,"onUpdate:value":t[3]||(t[3]=function(e){return r.newInterfaceForm.path=e}),placeholder:"/path"},{addonBefore:Object(c["R"])((function(){return[Object(c["m"])(d,{value:r.newInterfaceForm.reqMethod,"onUpdate:value":t[2]||(t[2]=function(e){return r.newInterfaceForm.reqMethod=e})},{default:Object(c["R"])((function(){return[Object(c["m"])(s,{value:"get"},{default:Object(c["R"])((function(){return[w]})),_:1}),Object(c["m"])(s,{value:"post"},{default:Object(c["R"])((function(){return[M]})),_:1})]})),_:1},8,["value"])]})),_:1},8,["value"])]})),_:1}),Object(c["m"])(u,{label:"注"},{default:Object(c["R"])((function(){return[_]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","onCancel"])}var g=n("5530"),y={props:{showCreateModal:{type:Boolean,default:!1}},data:function(){return{loading:!1,newInterfaceForm:{reqMethod:"get"}}},inject:["getInterfaceList"],methods:{closeCreateModal:function(){this.$emit("update:showCreateModal",!this.showCreateModal)},createInterface:function(){var e=this;this.$refs.newInterfaceForm.validate().then((function(){e.loading=!0;var t=Object(g["a"])(Object(g["a"])({},e.newInterfaceForm),{},{pid:e.$route.params.pid});e.$api.createInterface(t).then((function(t){null===t.error_no&&(e.getInterfaceList(),e.closeCreateModal()),e.loading=!1}))})).catch((function(e){console.log("error",e)}))}}};y.render=k;var L=y,$={components:{PlusSquareOutlined:h["a"],MinusSquareOutlined:I["a"],CreateInterfaceModal:L},props:{interfaceList:{type:Array,default:function(){return[]}}},data:function(){return{showCreateInterfaceModal:!1,selectedKeys:[""]}},inject:["getInterfaceList"],watch:{"$route.params.iid":{handler:function(e){this.selectedKeys[0]=e||"all"},immediate:!0}},methods:{selectMenu:function(e){var t=e.key;if("all"===t)return this.goProjectHome();this.selectedKeys[0]=t,this.$router.push("/project/".concat(this.$route.params.pid,"/interface/").concat(t))},goProjectHome:function(){this.$router.push("/project/".concat(this.$route.params.pid))},addInterface:function(){this.showCreateInterfaceModal=!0},delInterface:function(e){var t=this;this.$api.delInterface({id:e}).then((function(e){null===e.error_no&&(t.$msg.success("删除成功！"),t.getInterfaceList(),t.goProjectHome())}))}}};n("88f4");$.render=p,$.__scopeId="data-v-634c8910";var R=$,K=Object(c["U"])("data-v-39d3cae5");Object(c["E"])("data-v-39d3cae5");var B={class:"project-main"},q={class:"head"},F=Object(c["m"])("h3",null,"接口列表",-1),S=Object(c["l"])("添加接口"),U={class:"content"},x=Object(c["m"])("a",null,"Delete",-1);Object(c["C"])();var P=K((function(e,t,n,a,r,o){var i=Object(c["I"])("a-button"),l=Object(c["I"])("a-tag"),u=Object(c["I"])("a-popconfirm"),s=Object(c["I"])("a-table"),d=Object(c["I"])("CreateInterfaceModal");return Object(c["B"])(),Object(c["j"])("div",B,[Object(c["m"])("div",q,[F,Object(c["m"])(i,{type:"primary",onClick:o.addInterface},{default:K((function(){return[S]})),_:1},8,["onClick"])]),Object(c["m"])("div",U,[Object(c["m"])(s,{dataSource:n.interfaceList,columns:r.columns,rowKey:"_id"},{name:K((function(t){var n=t.record,a=t.text;return[Object(c["m"])("a",{onClick:function(t){return e.$router.push("/project/".concat(e.$route.params.pid,"/interface/").concat(n._id))}},Object(c["K"])(a),9,["onClick"])]})),path:K((function(t){var n=t.record,a=t.text;return[Object(c["m"])("span",null,[Object(c["m"])(l,{color:e.$utils.tagColor(n.reqMethod)},{default:K((function(){return[Object(c["l"])(Object(c["K"])(n.reqMethod),1)]})),_:2},1032,["color"]),Object(c["l"])(" "+Object(c["K"])(a),1)])]})),options:K((function(e){var t=e.record;return[n.interfaceList.length?(Object(c["B"])(),Object(c["j"])(u,{key:0,title:"Sure to delete?",onConfirm:function(e){return o.delInterface(t._id)}},{default:K((function(){return[x]})),_:2},1032,["onConfirm"])):Object(c["k"])("",!0)]})),_:1},8,["dataSource","columns"]),r.showCreateInterfaceModal?(Object(c["B"])(),Object(c["j"])(d,{key:0,showCreateModal:r.showCreateInterfaceModal,"onUpdate:showCreateModal":t[1]||(t[1]=function(e){return r.showCreateInterfaceModal=e})},null,8,["showCreateModal"])):Object(c["k"])("",!0)])])})),H={components:{CreateInterfaceModal:L},props:{interfaceList:{type:Array,default:function(){return[]}}},data:function(){return{showCreateInterfaceModal:!1,columns:[{title:"接口名称",dataIndex:"name",key:"name",slots:{customRender:"name"}},{title:"接口路径",dataIndex:"path",key:"path",slots:{customRender:"path"}},{title:"操作",dataIndex:"options",key:"options",slots:{customRender:"options"}}]}},inject:["getInterfaceList"],methods:{addInterface:function(){this.showCreateInterfaceModal=!0},delInterface:function(e){var t=this;console.log(e),this.$api.delInterface({id:e}).then((function(e){null===e.error_no&&(t.$msg.success("删除成功！"),t.getInterfaceList())}))}}};n("26d9");H.render=P,H.__scopeId="data-v-39d3cae5";var A=H,E={components:{Menu:R,Main:A},data:function(){return{interfaceList:[]}},computed:{showMain:function(){return this.$route.path==="/project/"+this.$route.params.pid}},provide:function(){return{getInterfaceList:this.getInterfaceList}},created:function(){this.getInterfaceList()},methods:{getInterfaceList:function(){var e=this;this.$api.interfaceList({pid:this.$route.params.pid}).then((function(t){null===t.error_no&&(e.interfaceList=t.data)}))}}};n("1f28");E.render=i;t["default"]=E},"88f4":function(e,t,n){"use strict";n("05cc")},"9bc8":function(e,t,n){},e23c:function(e,t,n){}}]);